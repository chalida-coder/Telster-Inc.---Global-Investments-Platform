<section id="global-presence" class="py-20 sm:py-28">
  <div class="container mx-auto px-6">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold font-heading text-white">Our Global Footprint</h2>
      <p class="text-lg text-gray-400 mt-4 max-w-2xl mx-auto">Click on a sector to filter our worldwide operations.</p>
    </div>
    <div class="relative">
      <div #mapContainer class="w-full h-[350px] md:h-[600px] flex items-center justify-center"></div>
      <div #tooltip class="absolute glassmorphic rounded-lg p-3 text-sm transition-opacity duration-300 pointer-events-none opacity-0 shadow-lg">
          <h4 class="font-bold text-white text-base">{{ tooltipData().name }}</h4>
          <p class="text-gray-300">{{ tooltipData().description }}</p>
      </div>
    </div>
    <div class="flex justify-center items-center gap-4 mt-8 flex-wrap">
      @for(sector of legend; track sector.name) {
        <button
          (click)="setFilter(sector.name)"
          class="flex items-center space-x-2 px-4 py-2 rounded-full border transition-all duration-300 transform hover:-translate-y-1"
          [class.bg-white/5]="activeFilter() !== sector.name"
          [class.hover:bg-white/10]="activeFilter() !== sector.name"
          [style.border-color]="activeFilter() === sector.name ? sector.color : 'transparent'"
          [style.box-shadow]="activeFilter() === sector.name ? '0 0 12px ' + sector.color : 'none'"
          >
          <span class="w-3 h-3 rounded-full" [style.background-color]="sector.color"></span>
          <span class="text-gray-300 text-sm font-medium">{{ sector.name }}</span>
        </button>
      }
      @if (activeFilter()) {
        <button (click)="clearFilter()" class="text-sm text-gray-400 hover:text-vip-gold transition-colors duration-300 underline">
          Clear Filter
        </button>
      }
    </div>
  </div>
</section>